{"name":"Log2bgp","tagline":"Border Gateway Protocol Event Engine","body":"### log2BGP event engine [![Build Status](https://travis-ci.org/ahebert/log2BGP.svg?branch=master)](https://travis-ci.org/ahebert/log2BGP)\r\nThis daemon collects IPv4/IPv6 routing information and tracks the historical attributes. Routing updates may also have attributes aliased to become (graph) readable. This function exists to allow the exporting of RIB updates to splunk, or any such data collector.\r\n\r\nA beneficial side-effect of collecting BGP routing information is the ability to track BGP updates/events local or remote(upstream). To analyze events splunk is supported. A JSON/TCP socket/msgpack API is currently under development.\r\n\r\nCustom graphs can be easily implemented if taken the time to do so. There's certainly no need to rely on splunk if one developed another way of displaying data. This project is meant to be nothing more than a route collector, and \r\nit's interface is solely CLI(command line interface). This project does not have graph data \"out of the box\".\r\n\r\n![bgplg](https://raw.githubusercontent.com/log2co/log2BGP/master/doc/graph.png)\r\n\r\n### Enhancing Automation\r\nOn large-scale networks, this daemon may serve as a BGP routing information base for scripts to harvest network information. This eliminates the need to \"screen scrape\" output with regex, which always leaves me feeling dirty. A JSON/Socket API is currently under development to serve this purpose.\r\n\r\n### Documentation\r\n* **This daemon requires the [CLI](https://github.com/ahebert/log2CLI) for configuration.**\r\n* **[Installing](https://github.com/log2co/log2BGP/wiki/installing)**\r\n* **[Command-line Basics](https://github.com/log2co/log2BGP/wiki/cli-basics)** \r\n* **[Command-line Refence](https://github.com/log2co/log2BGP/wiki/cli-reference)**\r\n* **[REST API Reference](https://github.com/log2co/log2BGP/wiki/api-reference)**\r\n\r\n### Release Notes on bgpd v1.0.3(captain's log)\r\nNew capabilities in this revision, and 1 bug fix.\r\nI've decided to use the daemons current binary database as a means of\r\nindexing BGP updates. These entries can be queried via a URL served by the ruby library Sinatra, or directly served via TCP socket API call.\r\n\r\nThe BGP event database is organized by [peer id|prefix] key pair in the RIB, and that RIB entry holds all indexes for BGP event data. Each prefix may occupy up to 1000 entries. Once the max entry limit is reached (1000 entries), the oldest entries will begin to be overwritten. It's recommended that you export to some log collector if you wish to keep the data.\r\n\r\n#### Additions\r\n* Created version definitions in `version.h`.\r\n* Created TCP listener for Sinatra/socket API\r\n* Converts all API call returns to JSON formatted strings.\r\n* Supports wide(2byte) and narrow(1byte) character TCP sockets. e.g Unicode support\r\n* Reaching the sinatra API:\r\n\t+ Current:\r\n\t\t+ http://[serverip]:4567/bgp/ipv4/:prefix\r\n\t+ History:\r\n\t\t+ http://[serverip]:4567/bgp/ipv4/:prefix/history\r\n* Reaching the TCP socket level API:\r\n\t+ open TCP socket to [serverip] port 667\r\n    \t+ write command length followed by api-get\r\n    \t+ can be tested with `telnet localhost 667`\r\n\r\n#### Socket API with Ruby example\r\n``` ruby\r\n    ## BGP Looking Glass Socket API example\r\n    \r\n    require 'socket'      # Sockets are in standard library\r\n    \r\n    def api_write(cmd)\r\n    \r\n      host = '127.0.0.1'\r\n      port = 667\r\n    \r\n      s = TCPSocket.open(host, port)\r\n      \r\n      # Here we need to prepend the string length of the command.\r\n      # The API will expect the length first.\r\n      s.write(cmd.length.chr+cmd.to_s)\r\n      \r\n      # ret_val is JSON formatted after this read\r\n      ret_val = s.read   # Read lines from the socket\r\n      s.close            # Close the socket when done\r\n      \r\n      return ret_val.to_s\r\n    end\r\n    \r\n    # Current prefix data\r\n    puts(\"current data for 8.8.8.8 is:\")\r\n    puts(api_write(\"api-get prefix 8.8.8.8\"))\r\n    \r\n    # Current prefix data, and historical\r\n    puts(\"current & historical data for 8.8.8.8 is:\")\r\n    puts(api_write(\"api-get prefix 8.8.8.8 history\"))\r\n```\r\n\r\n#### Revisions\r\n* Peer state machine revised to only use 1 dedicated thread for reads, and the main BGP thread handles all queue processing. This has reduced the number of threads from 2 per peer to 1.\r\n* Collapsed TCP server loops for CLI and API into a single method.\r\nThis will reduce code bloat.\r\n\r\n#### Bug fixes\r\n* bgpd failed to create it's withdraw database if the file didn't already exist. Failure to open it's database resulted in BGP event data not being collected.\r\n\r\n### TODO (in progress)\r\n\r\n* Add more functionality to the API from this point forward.\r\n* Doxygen code comment clean up.\r\n* Hosting Doxygen on projects webpage.\r\n* Make max database entries configurable instead of hard-coded limit 1000.\r\n\r\n### Road-map (up coming plans)\r\n* IPv6 and multi-protocol extensions.\r\n* BGP Additional Paths support. [Cisco Documentation](http://www.cisco.com/en/US/docs/ios-xml/ios/iproute_bgp/configuration/xe-3s/asr1000/irg-additional-paths.html)\r\n* The CLI application responsible for configuring `bgpd` __will be deprecated at some point in the future__. CLI will be replaced with a configuration language that will allow start-up and run-time configurations via configuration scripts. Yep, CLI is going away.\r\n* Web front end for pulling JSON from the API and displaying in a friendly UI.\r\n* Considering graphing BGP event data for the web front end.\r\n\r\n### Bug Reporting\r\nSee [issues](https://github.com/log2co/log2BGP/issues) to report issues and check for updates on what is currently being worked.\r\n\r\n### Contributing\r\nIf you wish to contribute, please fork the repo and contact <aaron.hebert@gmail.com> if you have any questions.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}